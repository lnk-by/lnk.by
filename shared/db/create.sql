CREATE TABLE IF NOT EXISTS organization (
	id VARCHAR(36) PRIMARY KEY,
	name VARCHAR(255) NOT NULL,
	status VARCHAR(16) CHECK (status IN ('active', 'cancelled', 'deleted')),
	created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
	updated_at TIMESTAMPTZ NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS customer (
	id VARCHAR(36) PRIMARY KEY,
	email VARCHAR(255) NOT NULL,
	name VARCHAR(255) NOT NULL,
    organization_id VARCHAR(36) REFERENCES organization(id),
	status VARCHAR(16) CHECK (status IN ('active', 'cancelled', 'deleted')),
	created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
	updated_at TIMESTAMPTZ NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS campaign (
	id VARCHAR(36) PRIMARY KEY,
	name VARCHAR(255) NOT NULL,
    valid_from TIMESTAMPTZ NOT NULL DEFAULT now(),
    valid_until TIMESTAMPTZ NOT NULL DEFAULT '2050-01-01 00:00:00+00',
	organization_id VARCHAR(36) REFERENCES organization(id),
	customer_id VARCHAR(36) REFERENCES customer(id),
	status VARCHAR(16) CHECK (status IN ('active', 'cancelled', 'deleted')),
	created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
	updated_at TIMESTAMPTZ NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS shorturl (
	key VARCHAR(32) PRIMARY KEY,
	is_custom BOOLEAN DEFAULT FALSE,
	target VARCHAR(2048) NOT NULL,
    valid_from TIMESTAMPTZ NOT NULL DEFAULT now(),
    valid_until TIMESTAMPTZ NOT NULL DEFAULT '2050-01-01 00:00:00+00',
	campaign_id VARCHAR(36) REFERENCES campaign(id),
	customer_id VARCHAR(36) REFERENCES customer(id),
	status VARCHAR(16) CHECK (status IN ('active', 'cancelled', 'deleted')),
	created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
	updated_at TIMESTAMPTZ NOT NULL DEFAULT now()
);

CREATE INDEX IF NOT EXISTS idx_customer_by_organization ON customer(organization_id);

CREATE INDEX IF NOT EXISTS idx_campaign_customer ON campaign(customer_id);

CREATE INDEX IF NOT EXISTS idx_campaign_org ON campaign(organization_id);

CREATE INDEX IF NOT EXISTS idx_shorturl_customer ON shorturl(customer_id);

CREATE INDEX IF NOT EXISTS idx_shorturl_campaign ON shorturl(campaign_id);

CREATE OR REPLACE FUNCTION set_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = now();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS set_updated_at_organization_trigger ON organization;
CREATE TRIGGER set_updated_at_organization_trigger BEFORE UPDATE ON organization FOR EACH ROW EXECUTE FUNCTION set_updated_at();


DROP TRIGGER IF EXISTS set_updated_at_customer_trigger ON customer;
CREATE TRIGGER set_updated_at_customer_trigger BEFORE UPDATE ON customer FOR EACH ROW EXECUTE FUNCTION set_updated_at();

DROP TRIGGER IF EXISTS set_updated_at_campaign_trigger ON campaign;
CREATE TRIGGER set_updated_at_campaign_trigger BEFORE UPDATE ON campaign FOR EACH ROW EXECUTE FUNCTION set_updated_at();

DROP TRIGGER IF EXISTS set_updated_at_shorturl_trigger ON shorturl;
CREATE TRIGGER set_updated_at_shorturl_trigger BEFORE UPDATE ON shorturl FOR EACH ROW EXECUTE FUNCTION set_updated_at();

-- statistics
CREATE TABLE IF NOT EXISTS total_count (
	key VARCHAR(32) PRIMARY KEY,
	total INT NOT NULL DEFAULT 0
);

CREATE TABLE IF NOT EXISTS daily_count (
    key VARCHAR(32) PRIMARY KEY,
    day001 INT NOT NULL DEFAULT 0,
    day002 INT NOT NULL DEFAULT 0,
    day003 INT NOT NULL DEFAULT 0,
    day004 INT NOT NULL DEFAULT 0,
    day005 INT NOT NULL DEFAULT 0,
    day006 INT NOT NULL DEFAULT 0,
    day007 INT NOT NULL DEFAULT 0,
    day008 INT NOT NULL DEFAULT 0,
    day009 INT NOT NULL DEFAULT 0,
    day010 INT NOT NULL DEFAULT 0,
    day011 INT NOT NULL DEFAULT 0,
    day012 INT NOT NULL DEFAULT 0,
    day013 INT NOT NULL DEFAULT 0,
    day014 INT NOT NULL DEFAULT 0,
    day015 INT NOT NULL DEFAULT 0,
    day016 INT NOT NULL DEFAULT 0,
    day017 INT NOT NULL DEFAULT 0,
    day018 INT NOT NULL DEFAULT 0,
    day019 INT NOT NULL DEFAULT 0,
    day020 INT NOT NULL DEFAULT 0,
    day021 INT NOT NULL DEFAULT 0,
    day022 INT NOT NULL DEFAULT 0,
    day023 INT NOT NULL DEFAULT 0,
    day024 INT NOT NULL DEFAULT 0,
    day025 INT NOT NULL DEFAULT 0,
    day026 INT NOT NULL DEFAULT 0,
    day027 INT NOT NULL DEFAULT 0,
    day028 INT NOT NULL DEFAULT 0,
    day029 INT NOT NULL DEFAULT 0,
    day030 INT NOT NULL DEFAULT 0,
    day031 INT NOT NULL DEFAULT 0,
    day032 INT NOT NULL DEFAULT 0,
    day033 INT NOT NULL DEFAULT 0,
    day034 INT NOT NULL DEFAULT 0,
    day035 INT NOT NULL DEFAULT 0,
    day036 INT NOT NULL DEFAULT 0,
    day037 INT NOT NULL DEFAULT 0,
    day038 INT NOT NULL DEFAULT 0,
    day039 INT NOT NULL DEFAULT 0,
    day040 INT NOT NULL DEFAULT 0,
    day041 INT NOT NULL DEFAULT 0,
    day042 INT NOT NULL DEFAULT 0,
    day043 INT NOT NULL DEFAULT 0,
    day044 INT NOT NULL DEFAULT 0,
    day045 INT NOT NULL DEFAULT 0,
    day046 INT NOT NULL DEFAULT 0,
    day047 INT NOT NULL DEFAULT 0,
    day048 INT NOT NULL DEFAULT 0,
    day049 INT NOT NULL DEFAULT 0,
    day050 INT NOT NULL DEFAULT 0,
    day051 INT NOT NULL DEFAULT 0,
    day052 INT NOT NULL DEFAULT 0,
    day053 INT NOT NULL DEFAULT 0,
    day054 INT NOT NULL DEFAULT 0,
    day055 INT NOT NULL DEFAULT 0,
    day056 INT NOT NULL DEFAULT 0,
    day057 INT NOT NULL DEFAULT 0,
    day058 INT NOT NULL DEFAULT 0,
    day059 INT NOT NULL DEFAULT 0,
    day060 INT NOT NULL DEFAULT 0,
    day061 INT NOT NULL DEFAULT 0,
    day062 INT NOT NULL DEFAULT 0,
    day063 INT NOT NULL DEFAULT 0,
    day064 INT NOT NULL DEFAULT 0,
    day065 INT NOT NULL DEFAULT 0,
    day066 INT NOT NULL DEFAULT 0,
    day067 INT NOT NULL DEFAULT 0,
    day068 INT NOT NULL DEFAULT 0,
    day069 INT NOT NULL DEFAULT 0,
    day070 INT NOT NULL DEFAULT 0,
    day071 INT NOT NULL DEFAULT 0,
    day072 INT NOT NULL DEFAULT 0,
    day073 INT NOT NULL DEFAULT 0,
    day074 INT NOT NULL DEFAULT 0,
    day075 INT NOT NULL DEFAULT 0,
    day076 INT NOT NULL DEFAULT 0,
    day077 INT NOT NULL DEFAULT 0,
    day078 INT NOT NULL DEFAULT 0,
    day079 INT NOT NULL DEFAULT 0,
    day080 INT NOT NULL DEFAULT 0,
    day081 INT NOT NULL DEFAULT 0,
    day082 INT NOT NULL DEFAULT 0,
    day083 INT NOT NULL DEFAULT 0,
    day084 INT NOT NULL DEFAULT 0,
    day085 INT NOT NULL DEFAULT 0,
    day086 INT NOT NULL DEFAULT 0,
    day087 INT NOT NULL DEFAULT 0,
    day088 INT NOT NULL DEFAULT 0,
    day089 INT NOT NULL DEFAULT 0,
    day090 INT NOT NULL DEFAULT 0,
    day091 INT NOT NULL DEFAULT 0,
    day092 INT NOT NULL DEFAULT 0,
    day093 INT NOT NULL DEFAULT 0,
    day094 INT NOT NULL DEFAULT 0,
    day095 INT NOT NULL DEFAULT 0,
    day096 INT NOT NULL DEFAULT 0,
    day097 INT NOT NULL DEFAULT 0,
    day098 INT NOT NULL DEFAULT 0,
    day099 INT NOT NULL DEFAULT 0,
    day100 INT NOT NULL DEFAULT 0,
    day101 INT NOT NULL DEFAULT 0,
    day102 INT NOT NULL DEFAULT 0,
    day103 INT NOT NULL DEFAULT 0,
    day104 INT NOT NULL DEFAULT 0,
    day105 INT NOT NULL DEFAULT 0,
    day106 INT NOT NULL DEFAULT 0,
    day107 INT NOT NULL DEFAULT 0,
    day108 INT NOT NULL DEFAULT 0,
    day109 INT NOT NULL DEFAULT 0,
    day110 INT NOT NULL DEFAULT 0,
    day111 INT NOT NULL DEFAULT 0,
    day112 INT NOT NULL DEFAULT 0,
    day113 INT NOT NULL DEFAULT 0,
    day114 INT NOT NULL DEFAULT 0,
    day115 INT NOT NULL DEFAULT 0,
    day116 INT NOT NULL DEFAULT 0,
    day117 INT NOT NULL DEFAULT 0,
    day118 INT NOT NULL DEFAULT 0,
    day119 INT NOT NULL DEFAULT 0,
    day120 INT NOT NULL DEFAULT 0,
    day121 INT NOT NULL DEFAULT 0,
    day122 INT NOT NULL DEFAULT 0,
    day123 INT NOT NULL DEFAULT 0,
    day124 INT NOT NULL DEFAULT 0,
    day125 INT NOT NULL DEFAULT 0,
    day126 INT NOT NULL DEFAULT 0,
    day127 INT NOT NULL DEFAULT 0,
    day128 INT NOT NULL DEFAULT 0,
    day129 INT NOT NULL DEFAULT 0,
    day130 INT NOT NULL DEFAULT 0,
    day131 INT NOT NULL DEFAULT 0,
    day132 INT NOT NULL DEFAULT 0,
    day133 INT NOT NULL DEFAULT 0,
    day134 INT NOT NULL DEFAULT 0,
    day135 INT NOT NULL DEFAULT 0,
    day136 INT NOT NULL DEFAULT 0,
    day137 INT NOT NULL DEFAULT 0,
    day138 INT NOT NULL DEFAULT 0,
    day139 INT NOT NULL DEFAULT 0,
    day140 INT NOT NULL DEFAULT 0,
    day141 INT NOT NULL DEFAULT 0,
    day142 INT NOT NULL DEFAULT 0,
    day143 INT NOT NULL DEFAULT 0,
    day144 INT NOT NULL DEFAULT 0,
    day145 INT NOT NULL DEFAULT 0,
    day146 INT NOT NULL DEFAULT 0,
    day147 INT NOT NULL DEFAULT 0,
    day148 INT NOT NULL DEFAULT 0,
    day149 INT NOT NULL DEFAULT 0,
    day150 INT NOT NULL DEFAULT 0,
    day151 INT NOT NULL DEFAULT 0,
    day152 INT NOT NULL DEFAULT 0,
    day153 INT NOT NULL DEFAULT 0,
    day154 INT NOT NULL DEFAULT 0,
    day155 INT NOT NULL DEFAULT 0,
    day156 INT NOT NULL DEFAULT 0,
    day157 INT NOT NULL DEFAULT 0,
    day158 INT NOT NULL DEFAULT 0,
    day159 INT NOT NULL DEFAULT 0,
    day160 INT NOT NULL DEFAULT 0,
    day161 INT NOT NULL DEFAULT 0,
    day162 INT NOT NULL DEFAULT 0,
    day163 INT NOT NULL DEFAULT 0,
    day164 INT NOT NULL DEFAULT 0,
    day165 INT NOT NULL DEFAULT 0,
    day166 INT NOT NULL DEFAULT 0,
    day167 INT NOT NULL DEFAULT 0,
    day168 INT NOT NULL DEFAULT 0,
    day169 INT NOT NULL DEFAULT 0,
    day170 INT NOT NULL DEFAULT 0,
    day171 INT NOT NULL DEFAULT 0,
    day172 INT NOT NULL DEFAULT 0,
    day173 INT NOT NULL DEFAULT 0,
    day174 INT NOT NULL DEFAULT 0,
    day175 INT NOT NULL DEFAULT 0,
    day176 INT NOT NULL DEFAULT 0,
    day177 INT NOT NULL DEFAULT 0,
    day178 INT NOT NULL DEFAULT 0,
    day179 INT NOT NULL DEFAULT 0,
    day180 INT NOT NULL DEFAULT 0,
    day181 INT NOT NULL DEFAULT 0,
    day182 INT NOT NULL DEFAULT 0,
    day183 INT NOT NULL DEFAULT 0,
    day184 INT NOT NULL DEFAULT 0,
    day185 INT NOT NULL DEFAULT 0,
    day186 INT NOT NULL DEFAULT 0,
    day187 INT NOT NULL DEFAULT 0,
    day188 INT NOT NULL DEFAULT 0,
    day189 INT NOT NULL DEFAULT 0,
    day190 INT NOT NULL DEFAULT 0,
    day191 INT NOT NULL DEFAULT 0,
    day192 INT NOT NULL DEFAULT 0,
    day193 INT NOT NULL DEFAULT 0,
    day194 INT NOT NULL DEFAULT 0,
    day195 INT NOT NULL DEFAULT 0,
    day196 INT NOT NULL DEFAULT 0,
    day197 INT NOT NULL DEFAULT 0,
    day198 INT NOT NULL DEFAULT 0,
    day199 INT NOT NULL DEFAULT 0,
    day200 INT NOT NULL DEFAULT 0,
    day201 INT NOT NULL DEFAULT 0,
    day202 INT NOT NULL DEFAULT 0,
    day203 INT NOT NULL DEFAULT 0,
    day204 INT NOT NULL DEFAULT 0,
    day205 INT NOT NULL DEFAULT 0,
    day206 INT NOT NULL DEFAULT 0,
    day207 INT NOT NULL DEFAULT 0,
    day208 INT NOT NULL DEFAULT 0,
    day209 INT NOT NULL DEFAULT 0,
    day210 INT NOT NULL DEFAULT 0,
    day211 INT NOT NULL DEFAULT 0,
    day212 INT NOT NULL DEFAULT 0,
    day213 INT NOT NULL DEFAULT 0,
    day214 INT NOT NULL DEFAULT 0,
    day215 INT NOT NULL DEFAULT 0,
    day216 INT NOT NULL DEFAULT 0,
    day217 INT NOT NULL DEFAULT 0,
    day218 INT NOT NULL DEFAULT 0,
    day219 INT NOT NULL DEFAULT 0,
    day220 INT NOT NULL DEFAULT 0,
    day221 INT NOT NULL DEFAULT 0,
    day222 INT NOT NULL DEFAULT 0,
    day223 INT NOT NULL DEFAULT 0,
    day224 INT NOT NULL DEFAULT 0,
    day225 INT NOT NULL DEFAULT 0,
    day226 INT NOT NULL DEFAULT 0,
    day227 INT NOT NULL DEFAULT 0,
    day228 INT NOT NULL DEFAULT 0,
    day229 INT NOT NULL DEFAULT 0,
    day230 INT NOT NULL DEFAULT 0,
    day231 INT NOT NULL DEFAULT 0,
    day232 INT NOT NULL DEFAULT 0,
    day233 INT NOT NULL DEFAULT 0,
    day234 INT NOT NULL DEFAULT 0,
    day235 INT NOT NULL DEFAULT 0,
    day236 INT NOT NULL DEFAULT 0,
    day237 INT NOT NULL DEFAULT 0,
    day238 INT NOT NULL DEFAULT 0,
    day239 INT NOT NULL DEFAULT 0,
    day240 INT NOT NULL DEFAULT 0,
    day241 INT NOT NULL DEFAULT 0,
    day242 INT NOT NULL DEFAULT 0,
    day243 INT NOT NULL DEFAULT 0,
    day244 INT NOT NULL DEFAULT 0,
    day245 INT NOT NULL DEFAULT 0,
    day246 INT NOT NULL DEFAULT 0,
    day247 INT NOT NULL DEFAULT 0,
    day248 INT NOT NULL DEFAULT 0,
    day249 INT NOT NULL DEFAULT 0,
    day250 INT NOT NULL DEFAULT 0,
    day251 INT NOT NULL DEFAULT 0,
    day252 INT NOT NULL DEFAULT 0,
    day253 INT NOT NULL DEFAULT 0,
    day254 INT NOT NULL DEFAULT 0,
    day255 INT NOT NULL DEFAULT 0,
    day256 INT NOT NULL DEFAULT 0,
    day257 INT NOT NULL DEFAULT 0,
    day258 INT NOT NULL DEFAULT 0,
    day259 INT NOT NULL DEFAULT 0,
    day260 INT NOT NULL DEFAULT 0,
    day261 INT NOT NULL DEFAULT 0,
    day262 INT NOT NULL DEFAULT 0,
    day263 INT NOT NULL DEFAULT 0,
    day264 INT NOT NULL DEFAULT 0,
    day265 INT NOT NULL DEFAULT 0,
    day266 INT NOT NULL DEFAULT 0,
    day267 INT NOT NULL DEFAULT 0,
    day268 INT NOT NULL DEFAULT 0,
    day269 INT NOT NULL DEFAULT 0,
    day270 INT NOT NULL DEFAULT 0,
    day271 INT NOT NULL DEFAULT 0,
    day272 INT NOT NULL DEFAULT 0,
    day273 INT NOT NULL DEFAULT 0,
    day274 INT NOT NULL DEFAULT 0,
    day275 INT NOT NULL DEFAULT 0,
    day276 INT NOT NULL DEFAULT 0,
    day277 INT NOT NULL DEFAULT 0,
    day278 INT NOT NULL DEFAULT 0,
    day279 INT NOT NULL DEFAULT 0,
    day280 INT NOT NULL DEFAULT 0,
    day281 INT NOT NULL DEFAULT 0,
    day282 INT NOT NULL DEFAULT 0,
    day283 INT NOT NULL DEFAULT 0,
    day284 INT NOT NULL DEFAULT 0,
    day285 INT NOT NULL DEFAULT 0,
    day286 INT NOT NULL DEFAULT 0,
    day287 INT NOT NULL DEFAULT 0,
    day288 INT NOT NULL DEFAULT 0,
    day289 INT NOT NULL DEFAULT 0,
    day290 INT NOT NULL DEFAULT 0,
    day291 INT NOT NULL DEFAULT 0,
    day292 INT NOT NULL DEFAULT 0,
    day293 INT NOT NULL DEFAULT 0,
    day294 INT NOT NULL DEFAULT 0,
    day295 INT NOT NULL DEFAULT 0,
    day296 INT NOT NULL DEFAULT 0,
    day297 INT NOT NULL DEFAULT 0,
    day298 INT NOT NULL DEFAULT 0,
    day299 INT NOT NULL DEFAULT 0,
    day300 INT NOT NULL DEFAULT 0,
    day301 INT NOT NULL DEFAULT 0,
    day302 INT NOT NULL DEFAULT 0,
    day303 INT NOT NULL DEFAULT 0,
    day304 INT NOT NULL DEFAULT 0,
    day305 INT NOT NULL DEFAULT 0,
    day306 INT NOT NULL DEFAULT 0,
    day307 INT NOT NULL DEFAULT 0,
    day308 INT NOT NULL DEFAULT 0,
    day309 INT NOT NULL DEFAULT 0,
    day310 INT NOT NULL DEFAULT 0,
    day311 INT NOT NULL DEFAULT 0,
    day312 INT NOT NULL DEFAULT 0,
    day313 INT NOT NULL DEFAULT 0,
    day314 INT NOT NULL DEFAULT 0,
    day315 INT NOT NULL DEFAULT 0,
    day316 INT NOT NULL DEFAULT 0,
    day317 INT NOT NULL DEFAULT 0,
    day318 INT NOT NULL DEFAULT 0,
    day319 INT NOT NULL DEFAULT 0,
    day320 INT NOT NULL DEFAULT 0,
    day321 INT NOT NULL DEFAULT 0,
    day322 INT NOT NULL DEFAULT 0,
    day323 INT NOT NULL DEFAULT 0,
    day324 INT NOT NULL DEFAULT 0,
    day325 INT NOT NULL DEFAULT 0,
    day326 INT NOT NULL DEFAULT 0,
    day327 INT NOT NULL DEFAULT 0,
    day328 INT NOT NULL DEFAULT 0,
    day329 INT NOT NULL DEFAULT 0,
    day330 INT NOT NULL DEFAULT 0,
    day331 INT NOT NULL DEFAULT 0,
    day332 INT NOT NULL DEFAULT 0,
    day333 INT NOT NULL DEFAULT 0,
    day334 INT NOT NULL DEFAULT 0,
    day335 INT NOT NULL DEFAULT 0,
    day336 INT NOT NULL DEFAULT 0,
    day337 INT NOT NULL DEFAULT 0,
    day338 INT NOT NULL DEFAULT 0,
    day339 INT NOT NULL DEFAULT 0,
    day340 INT NOT NULL DEFAULT 0,
    day341 INT NOT NULL DEFAULT 0,
    day342 INT NOT NULL DEFAULT 0,
    day343 INT NOT NULL DEFAULT 0,
    day344 INT NOT NULL DEFAULT 0,
    day345 INT NOT NULL DEFAULT 0,
    day346 INT NOT NULL DEFAULT 0,
    day347 INT NOT NULL DEFAULT 0,
    day348 INT NOT NULL DEFAULT 0,
    day349 INT NOT NULL DEFAULT 0,
    day350 INT NOT NULL DEFAULT 0,
    day351 INT NOT NULL DEFAULT 0,
    day352 INT NOT NULL DEFAULT 0,
    day353 INT NOT NULL DEFAULT 0,
    day354 INT NOT NULL DEFAULT 0,
    day355 INT NOT NULL DEFAULT 0,
    day356 INT NOT NULL DEFAULT 0,
    day357 INT NOT NULL DEFAULT 0,
    day358 INT NOT NULL DEFAULT 0,
    day359 INT NOT NULL DEFAULT 0,
    day360 INT NOT NULL DEFAULT 0,
    day361 INT NOT NULL DEFAULT 0,
    day362 INT NOT NULL DEFAULT 0,
    day363 INT NOT NULL DEFAULT 0,
    day364 INT NOT NULL DEFAULT 0,
    day365 INT NOT NULL DEFAULT 0,
    day366 INT NOT NULL DEFAULT 0
);

CREATE TABLE IF NOT EXISTS hourly_count (
    key VARCHAR(32) PRIMARY KEY,
	hour00 INT NOT NULL DEFAULT 0,
	hour01 INT NOT NULL DEFAULT 0,
	hour02 INT NOT NULL DEFAULT 0,
	hour03 INT NOT NULL DEFAULT 0,
	hour04 INT NOT NULL DEFAULT 0,
	hour05 INT NOT NULL DEFAULT 0,
	hour06 INT NOT NULL DEFAULT 0,
	hour07 INT NOT NULL DEFAULT 0,
	hour08 INT NOT NULL DEFAULT 0,
	hour09 INT NOT NULL DEFAULT 0,
	hour10 INT NOT NULL DEFAULT 0,
	hour11 INT NOT NULL DEFAULT 0,
	hour12 INT NOT NULL DEFAULT 0,
	hour13 INT NOT NULL DEFAULT 0,
	hour14 INT NOT NULL DEFAULT 0,
	hour15 INT NOT NULL DEFAULT 0,
	hour16 INT NOT NULL DEFAULT 0,
	hour17 INT NOT NULL DEFAULT 0,
	hour18 INT NOT NULL DEFAULT 0,
	hour19 INT NOT NULL DEFAULT 0,
	hour20 INT NOT NULL DEFAULT 0,
	hour21 INT NOT NULL DEFAULT 0,
	hour22 INT NOT NULL DEFAULT 0,
	hour23 INT NOT NULL DEFAULT 0,
	hour24 INT NOT NULL DEFAULT 0
);

CREATE TABLE IF NOT EXISTS useragent_count (
    key VARCHAR(32) PRIMARY KEY,

    -- Device types
    device_desktop INT NOT NULL DEFAULT 0,
    device_tablet INT NOT NULL DEFAULT 0,
    device_mobile INT NOT NULL DEFAULT 0,
    device_bot INT NOT NULL DEFAULT 0,
    device_other INT NOT NULL DEFAULT 0,

    -- Operating systems
    os_windows INT NOT NULL DEFAULT 0,
    os_linux INT NOT NULL DEFAULT 0,
    os_macos INT NOT NULL DEFAULT 0,
    os_ios INT NOT NULL DEFAULT 0,
    os_android INT NOT NULL DEFAULT 0,
    os_other INT NOT NULL DEFAULT 0,

    -- Browsers
    browser_chrome INT NOT NULL DEFAULT 0,
    browser_opera INT NOT NULL DEFAULT 0,
    browser_internet_exporer INT NOT NULL DEFAULT 0,
    browser_edge INT NOT NULL DEFAULT 0,
    browser_firefox INT NOT NULL DEFAULT 0,
    browser_other INT NOT NULL DEFAULT 0,

    -- Device + OS combinations
    desktop_windows INT NOT NULL DEFAULT 0,
    desktop_linux INT NOT NULL DEFAULT 0,
    desktop_macos INT NOT NULL DEFAULT 0,
    tablet_windows INT NOT NULL DEFAULT 0,
    tablet_linux INT NOT NULL DEFAULT 0,
    tablet_ios INT NOT NULL DEFAULT 0,
    mobile_android INT NOT NULL DEFAULT 0,
    mobile_ios INT NOT NULL DEFAULT 0
);
